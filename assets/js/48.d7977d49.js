(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{515:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"下载安装nodejs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载安装nodejs"}},[s._v("#")]),s._v(" 下载安装nodeJS")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下载 nodejs")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://nodejs.org/dist/v12.18.2/node-v12.18.2-linux-x64.tar.xz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将 tar.xz 文件转为 tar 文件")]),s._v("\nxz -d node-v12.18.2-linux-x64.tar.xz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#执行 tar 解压")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf node-v12.18.2-linux-x64.tar\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重命名 并移动到 opt 文件下，创建一个 install 文件来保存自己安装的应用")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" node-v12.18.2-linux-x64 /opt/install/node\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置环境变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在文件最下方添加以下代码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/install/node  //Node所在路径\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NODE_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#执行命令使文件生效")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看node环境变量是否生效 - 查看node版本")]),s._v("\nnode -v\n")])])]),a("h3",{attrs:{id:"下载安装-mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载安装-mongodb"}},[s._v("#")]),s._v(" 下载安装 mongodb")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下载 mongdb")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("  https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-4.2.5.tgz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#解压")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf mongodb-linux-x86_64-rhel70-4.2.5.tgz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重命名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" mongodb-linux-x86_64-rhel70-4.2.5.tgz mongodb-4.2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在mongodb目录下创建data、logs目录和logs/mongodb.log文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" data logs\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" logs/mongodb.log\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保存退出")]),s._v("\n:wq\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在mongodb 的bin目录下创建mongodb.conf配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" mongodb.conf\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dbpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/install/mongodb-4.2/data/db\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("logpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/install/mongodb-4.2/logs/mongodb.log\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("fork")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#环境变量配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MONGODB_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/install/mongodb-4.2\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MONGODB_HOME")]),s._v("/bin\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保存后，重启系统配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入目录/etc/systemd/system/ 创建 mongodb.service")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/systemd/system/mongodb.service\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#输入以下")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("High-performance, schema-free document-oriented database\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("User")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/install/mongodb-4.2/bin/mongod --quiet --config /install/mongodb-4.2/bin/mongodb.conf\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保存，启动并查看进程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start mongodb\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl status mongodb\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#让他永久启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mongodb\n")])])]),a("h3",{attrs:{id:"本地上传文件到服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地上传文件到服务器"}},[s._v("#")]),s._v(" 本地上传文件到服务器")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#scp -r 文件本地绝对地址 username@IP:服务器目标文件地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /Users/dukeshao/Documents/1000存档/工作区项目/xiaorizi/xiaorizi_houtai/testmongo.zip root@203.195.136.177:/myapp\n")])])]),a("h3",{attrs:{id:"docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[s._v("#")]),s._v(" docker")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python3-pip\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#升级 pip3")]),s._v("\npip3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --upgrade pip\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用 root 权限登录 Centos。确保 yum 包更新到最新。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum update\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils device-mapper-persistent-data lvm2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装 docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置yum源 新版的 Docker 推荐使用 json 配置文件的方式，默认为 /etc/docker/daemon.json，非默认路径需要修改 dockerd 的 –config-file，在该文件中加入如下内容： ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry-mirrors"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://hub-mirror.c.163.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动并加入开机启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start docker\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" docker\n\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#拉取 mongo 镜像")]),s._v("\ndocker pull mongo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动 mongodb 并映射文件(:是映射文件目录)")]),s._v("\ndocker run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(":27017 -v /install/mongo:/data/db --name mongo_container -d mongo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入 mongo 容器，即可操作 mongodb 数据库")]),s._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it mongo_container mongo admin\n")])])]),a("p",[s._v("部署 node 接口的 dockerfile")]),s._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("latest\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" mkdir "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("p /opt/server\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /opt/server\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" /myapp/xiaorizi_back /opt/server\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" npm install\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 3355\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" node server.js\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出所有端口")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ntlp\n")])])]),a("h2",{attrs:{id:"command-not-found"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#command-not-found"}},[s._v("#")]),s._v(" command not found")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("提示bash: ls: "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" not found，无法使用Linux命令\n是因为环境变量"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v("被修改了\n只需在命令行执行\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin:/usr/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n即可\n")])])]),a("h2",{attrs:{id:"服务器常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器常用命令"}},[s._v("#")]),s._v(" 服务器常用命令")]),s._v(" "),a("h4",{attrs:{id:"_1-查看服务器内存使用情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看服务器内存使用情况"}},[s._v("#")]),s._v(" 1.查看服务器内存使用情况")]),s._v(" "),a("p",[s._v("free 命令显示系统使用和空闲的内存情况，包括物理内存、交互区内存(swap)和内核缓冲区内存。")]),s._v(" "),a("p",[s._v("free命令默认是显示单位kb，可以采用free -m和free -g命令查看，分别表示MB和GB")]),s._v(" "),a("p",[s._v("另外，free -h会自动选择以适合理解的容量单位显示")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" -m\n")])])]),a("p",[s._v("Mem:表示物理内存统计，如果机器剩余内存非常小，一般小于总内存的20%，则判断为系统物理内存不够")]),s._v(" "),a("p",[s._v("Swap: 表示硬盘上交换分区的使用情况，如剩余空间较小，需要留意当前系统内存使用情况及负载，当Swap的used值大于0时，则表示操作系统物理内存不够")]),s._v(" "),a("h4",{attrs:{id:"_2-查看应用程序占用情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-查看应用程序占用情况"}},[s._v("#")]),s._v(" 2.查看应用程序占用情况")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -eo pmem,pcpu,rss,vsize,args "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -k "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -r "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v("\n")])])]),a("h4",{attrs:{id:"_3-查看容器数量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-查看容器数量"}},[s._v("#")]),s._v(" 3.查看容器数量")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n-s 显示容器大小\n")])])]),a("h4",{attrs:{id:"_4-查看容器占用情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-查看容器占用情况"}},[s._v("#")]),s._v(" 4.查看容器占用情况")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker stats\n")])])]),a("h2",{attrs:{id:"mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[s._v("#")]),s._v(" mysql")]),s._v(" "),a("p",[s._v("服务器导入 xx.sql 数据库文件")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接 mysql")]),s._v("\nmysql -u root -p\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 选择数据库")]),s._v("\nuse "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("database"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 导入数据库备份文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ./home/data/xx.sql\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);